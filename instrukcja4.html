<!DOCTYPE html>
<!-- saved from url=(0086)http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Lab 04 - Pliki, wyra偶enia regularne</title>
  <style>
    code {
      white-space: pre-wrap;
    }

    span.smallcaps {
      font-variant: small-caps;
    }

    span.underline {
      text-decoration: underline;
    }

    div.column {
      display: inline-block;
      vertical-align: top;
      width: 50%;
    }

    div.hanging-indent {
      margin-left: 1.5em;
      text-indent: -1.5em;
    }

    ul.task-list {
      list-style: none;
    }

    pre>code.sourceCode {
      white-space: pre;
      position: relative;
    }

    pre>code.sourceCode>span {
      display: inline-block;
      line-height: 1.25;
    }

    pre>code.sourceCode>span:empty {
      height: 1.2em;
    }

    .sourceCode {
      overflow: visible;
    }

    code.sourceCode>span {
      color: inherit;
      text-decoration: inherit;
    }

    div.sourceCode {
      margin: 1em 0;
    }

    pre.sourceCode {
      margin: 0;
    }

    @media screen {
      div.sourceCode {
        overflow: auto;
      }
    }

    @media print {
      pre>code.sourceCode {
        white-space: pre-wrap;
      }

      pre>code.sourceCode>span {
        text-indent: -5em;
        padding-left: 5em;
      }
    }

    pre.numberSource code {
      counter-reset: source-line 0;
    }

    pre.numberSource code>span {
      position: relative;
      left: -4em;
      counter-increment: source-line;
    }

    pre.numberSource code>span>a:first-child::before {
      content: counter(source-line);
      position: relative;
      left: -1em;
      text-align: right;
      vertical-align: baseline;
      border: none;
      display: inline-block;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      padding: 0 4px;
      width: 4em;
      color: #aaaaaa;
    }

    pre.numberSource {
      margin-left: 3em;
      border-left: 1px solid #aaaaaa;
      padding-left: 4px;
    }

    div.sourceCode {}

    @media screen {
      pre>code.sourceCode>span>a:first-child::before {
        text-decoration: underline;
      }
    }

    code span.al {
      color: #ff0000;
      font-weight: bold;
    }

    /* Alert */
    code span.an {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Annotation */
    code span.at {
      color: #7d9029;
    }

    /* Attribute */
    code span.bn {
      color: #40a070;
    }

    /* BaseN */
    code span.bu {}

    /* BuiltIn */
    code span.cf {
      color: #007020;
      font-weight: bold;
    }

    /* ControlFlow */
    code span.ch {
      color: #4070a0;
    }

    /* Char */
    code span.cn {
      color: #880000;
    }

    /* Constant */
    code span.co {
      color: #60a0b0;
      font-style: italic;
    }

    /* Comment */
    code span.cv {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* CommentVar */
    code span.do {
      color: #ba2121;
      font-style: italic;
    }

    /* Documentation */
    code span.dt {
      color: #902000;
    }

    /* DataType */
    code span.dv {
      color: #40a070;
    }

    /* DecVal */
    code span.er {
      color: #ff0000;
      font-weight: bold;
    }

    /* Error */
    code span.ex {}

    /* Extension */
    code span.fl {
      color: #40a070;
    }

    /* Float */
    code span.fu {
      color: #06287e;
    }

    /* Function */
    code span.im {}

    /* Import */
    code span.in {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Information */
    code span.kw {
      color: #007020;
      font-weight: bold;
    }

    /* Keyword */
    code span.op {
      color: #666666;
    }

    /* Operator */
    code span.ot {
      color: #007020;
    }

    /* Other */
    code span.pp {
      color: #bc7a00;
    }

    /* Preprocessor */
    code span.sc {
      color: #4070a0;
    }

    /* SpecialChar */
    code span.ss {
      color: #bb6688;
    }

    /* SpecialString */
    code span.st {
      color: #4070a0;
    }

    /* String */
    code span.va {
      color: #19177c;
    }

    /* Variable */
    code span.vs {
      color: #4070a0;
    }

    /* VerbatimString */
    code span.wa {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Warning */
  </style>
  <link rel="stylesheet" href="css/github-markdown.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="css/rubynaxela-darkmode.css">
  <script type="text/javascript" src="js/rubynaxela-navbar.js"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="icon" type="image/x-icon" href="http://jug.put.poznan.pl/lab-psio/_static/favicon.ico">
</head>

<body>
  <main class="markdown-body">
    <header id="title-block-header">
      <h1 class="title">Lab 04 - Pliki, wyra偶enia regularne</h1>
    </header>
    <h1 id="lab-04---pliki-wyra偶enia-regularne">Lab 04 - Pliki, wyra偶enia regularne</h1>
    <h2 id="wyra偶enia-regularne">Wyra偶enia regularne</h2>
    <p>Wyra偶enia regularne pozwalaj tworzy uog贸lnione wzorce a nastpnie znajdowa je w tekcie (search) lub sprawdza
      czy tekst spenia kryteria wzorca (match). Zadanie to mo偶na r贸wnie偶 zrealizowa stosujce ptle i instrukcje
      warunkowe jednak taki kod bdzie skomplikowany i mao ekspresywny.</p>
    <h3 id="podstawowe-symbole-uog贸lniajce">Podstawowe symbole uog贸lniajce</h3>
    <p>W wyra偶eniu regularnym mog pojawi si nastpujce elementy su偶ce go uog贸lnionej reprezentacji znaku (wicej
      informacji dotyczcych skadni mo偶na znale藕 <a
        href="http://www.cplusplus.com/reference/regex/ECMAScript/">tutaj</a>:</p>
    <table>
      <thead>
        <tr class="header">
          <th>Symbol</th>
          <th>Znaczenie</th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td><code>\w</code></td>
          <td>zastpuje dowolny znak alfanumeryczny tzn. a-z, A-Z,0-9, _</td>
        </tr>
        <tr class="even">
          <td><code>\d</code></td>
          <td>zastpuje dowoln cyfr: 0-9</td>
        </tr>
        <tr class="odd">
          <td><code>\s</code></td>
          <td>oznacza znak biaej spacji (tzn. spacja lub tabulator)</td>
        </tr>
        <tr class="even">
          <td><code>\W</code> lub <code>\D</code> <code>\S</code></td>
          <td>zastpuje dowolny znak inny ni偶 <code>\w</code> lub <code>\d</code> lub <code>\s</code></td>
        </tr>
        <tr class="odd">
          <td><code>[A-Z1-3]</code></td>
          <td>zastpuje dowolny znak ze zbioru znak贸w wymienionego w wyra偶eniu. W przykadzie dowolny znak kt贸ry jest
            wielk liter (A-Z) lub cyfr 1,2 lub 3</td>
        </tr>
        <tr class="even">
          <td><code>[^1-3]</code></td>
          <td>zastpuje dowolny znak nie nale偶cy do wskazanego zbioru. W przykadzie dowolny znak r贸偶ny od cyfr 1,2,3
          </td>
        </tr>
        <tr class="odd">
          <td><code>.</code></td>
          <td>Zastpuje dowolny znak poza znakiem koca linii (<code>\n</code>)</td>
        </tr>
        <tr class="even">
          <td><code>(sth)</code></td>
          <td>Wyodrbnia grup opisan podwzorcem <code>sth</code>, taki wzorzec mo偶e wykorzystywa wszystkie symbole
            uog贸lniajce wyra偶enia regularnego.</td>
        </tr>
        <tr class="odd">
          <td><code>(PO)|(PZ)</code></td>
          <td><code>|</code> oznacza alternatyw dw贸ch wzorc贸w/znak贸w uog贸lniajcych. Przy dopasowaniu wzorca element
            jest uznawany jako pasujcy, gdy co najmniej jedna z grup/znak贸w zostaa poprawnie dopasowana</td>
        </tr>
        <tr class="even">
          <td><code>^</code></td>
          <td>oznacza pocztek linii tekstu, std dopasowanie nastpuje gdy nastpujce za tym znakiem wyra偶enie
            znajduje si na pocztku linii</td>
        </tr>
        <tr class="odd">
          <td><code>$</code></td>
          <td>oznacza koniec linii (<code>\n</code>), std wyra偶enie poprzedzajce ten znak musi znajdowa si na kocu
            linii.</td>
        </tr>
      </tbody>
    </table>
    <hr>
    <h4 id="zadanie-">Zadanie </h4>
    <p>Do sprawdzenia dziaania przykad贸w mo偶esz u偶y strony <a href="https://regex101.com/">regex101.com</a>. Wejd藕 na
      podan stron i zapoznaj si z jej dziaaniem, nastpnie wykonaj przedstawione poni偶ej zadania 1-3:</p>
    <ol type="1">
      <li>
        <p>Kod pocztowy w Polsce jest reprezentowany za pomoc wyra偶enia (przetestuj jego dziaanie podajc prawidowe i
          nieprawidowe kody): <code>\d\d-\d\d\d</code></p>
        <p>W wyra偶eniu tym cyfry s oznaczone wzorcem, natomiast kreska jest konkretnym znakiem (elementem
          nieuog贸lnionym).</p>
      </li>
      <li>
        <p>Jeli wyra偶enie regularne miaoby weryfikowa np. czy numer rejestracyjny pochodzi z Poznania i czy jest to
          numer rejestracyjny, mo偶e mie posta: <code>PO[A-Z0-9][A-Z0-9][A-Z0-9][A-Z0-9][A-Z0-9]</code></p>
      </li>
      <li>
        <p>Spr贸buj napisa pojedynczy wzorzec, kt贸ry bdzie pasowa zar贸wno do numer贸w rejestracyjnych rozpoczynajcych
          si na <code>PO</code> jak i na <code>PZ</code>.</p>
      </li>
    </ol>
    <hr>
    <h3 id="kwantyfikatory">Kwantyfikatory</h3>
    <p>Dla powtarzajcych si element贸w wzorca mo偶emy okreli reguy dotyczce ich wystpie:</p>
    <p>| Symbol | Znaczenie| |----|---| | <code>*</code> | Dany element wystpuje 0 lub wicej razy|
      |<code>+</code>|Dany element wystpuje 1 lub wicej razy| |<code>?</code>|Dany element wystpuje 0 lub 1 razy|
      |<code>{n}</code>|Dany element wystpuje dokadnie n razy| |<code>{n,}</code>|Dany element wystpuje
      <code>n</code> lub wicej razy| |<code>{min,max}</code>|Dany element wystpuje <code>min</code>, nie wicej ni偶
      <code>max</code> razy|
    </p>
    <p><strong>Uwaga</strong>: jeli w danym wzorcu chcemy wykorzysta kt贸ry z w/w kwantyfikator贸w lub symboli
      uog贸lniajcych jako zwyky znak nale偶y go poprzedzi backslashem np.: <code>\.</code> zostanie potraktowana jako
      znak kropki a nie oznaczenie dowolnego znaku.</p>
    <hr>
    <h4 id="zadanie-cd-">Zadanie cd </h4>
    <ol start="4" type="1">
      <li>Stosujc kwantyfikatory spr贸buj uog贸lni zar贸wno wzorce dla kodu pocztowego jak i numeru rejestracyjnego,
        wiedzc, 偶e: np. <code>\w+</code> jest wzorcem dla wyrazu (gdzie znak alfanumeryczny wystpuje 1 lub wicej
        razy)</li>
      <li>Kawantyfikatory mog by u偶ywane zar贸wno do pojedynczych symboli uog贸lniajcych jak i grup np.
        :<code>(sth)+</code>. Spr贸buj napisa wzorzec, kt贸ry sprawdzi czy dany cig jest numerem telefonu. W wersji
        prostszej wystarczy 偶e wyra偶enie bdzie w stanie poprawnie rozpozna cztery pierwsze podane poni偶ej przykady. W
        wersji trudniejszej (dla chtnych) spr贸buj uwzgldni 偶 numer ten mo偶e, ale nie musi by podawany z prefiksem
        kraju lub numer kierunkowy miejscowoci mo偶e by podany w nawiasie. Wzorzec powinien akceptowa nastpujce
        formy numeracji:</li>
    </ol>
    <pre><code>      12-34-56-789
      12 34 56 789
      12 429 34 30
      123-45-67-89
      0048123456789
      +48123456789
      +48 123-45-67-89
      (032) 6700327</code></pre>
    <p>Cigi w kt贸rych wystpuje wicej cyfry lub dodatkowe znaki nie powinny by akceptowane</p>
    <ol start="6" type="1">
      <li>Sprawd藕 dziaanie powy偶szego wyra偶enia wklejajc wyniki wyszukiwania ze strony google (np. fraza wyszukiwania:
        "numery telefon贸w filie") lub skorzystaj z przykadowego <a
          href="http://jug.put.poznan.pl/lab-psio/_resources/04/numeryTelefonowGoogle.html">pliku html</a>. Plik mo偶esz
        obejrze w przegldarce, nastpnie wywietl i skopiuj jego 藕r贸do i wklej je do <a
          href="https://regex101.com/">regex101</a>. Spr贸buj zrozumie dlaczego pr贸cz numer贸w telefon贸w jako wyniki
        dopasowanie pojawiy si r贸wnie偶 inne elementy i dlaczego cz numer贸w nie zostaa znaleziona. Na tym etapie
        nie ma koniecznoci wprowadzania istotnych modyfikacji wzorca (ale mo偶esz wprowadzi kilka zmian zwikszajcych
        skuteczno dopasowania), bdziesz to robi w ramach zadania domowego.</li>
    </ol>
    <p><em><strong>Uwaga do zadania 6:</strong></em> Pamitaj, 偶e stworzenie wzorca, kt贸ry w udostpnionym pliku
      znajdzie wszystkie numery telefonu, a jednoczenie nie wykryje innych bdnych dopasowa jest trudne do wykonania
      z uwagi na wystpowanie w tym pliku dodatkowych informacji w innym kodowaniu, nazw link贸w i funkcji JavaScript.
      Poprawne odr贸偶nienie numeru telefonu od innych kombinacji cyfr wystpujcych w kodzie jest mo偶liwe tylko wtedy gdy
      uwzgldnimy kontekst, w kt贸rym pojawia si dany cig. Std np. numery telefon贸w powinny by szukane tylko w czci
      pliku, w kt贸rym pojawiaj si wyniki wyszukiwania a nie w obrbie caego kodu strony. Czy jeste w stanie
      zidentyfikowa w pliku pocztek i koniec sekcji, w kt贸rej znajduj si wyniki wyszukiwa. Spr贸buj w tym celu w
      przegldarce wykorzysta narzdzie inspekcji.</p>
    <!-- 7. \W{2}(0?|\+\d{2}|00\d{2})(((-|\s|(<[^>]+>)|[\(\)])*\d){9})\D -->

    <hr>
    <h3 id="stdregex">std::regex</h3>
    <p>Wyra偶enia regularne w jzyku C++ (w STL w pliku nag贸wkowym <code>&lt;regex&gt;</code>) s zgodne z skadni
      ECMAScript (opisan powy偶ej), mog by r贸wnie偶 wykorzystywane w innych jzykach programowania i czci edytor贸w
      tekstu.</p>
    <p>Przy u偶ywaniu ich w jzyku C++ nale偶y pamita 偶eby wszystkie wystpienia znaku <code>\</code> zastpi podw贸jnym
      backslashem <code>\\</code> np. <code>\\w</code> lub poprzed藕 tekst wyra偶enia regularnego znakiem
      <code>R"(text)"</code> np. <code>std::regex re(R"(\d*)")</code> - zwr贸 uwag na dodatkowe nawiasy okrge, w
      kt贸rych nale偶y umieci cae wyra偶enie.
    </p>
    <h3 id="stdregex_match">std::regex_match</h3>
    <p>Funkcja su偶y do zweryfikowania czy cig przekazany jako argument jest w peni zgodny ze wzorcem. Uruchom i
      przeanalizuj poni偶szy kod:</p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>regex re(<span class="st">R"(\d+)"</span>);;</span>
<span id="cb2-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>smatch m;</span>
<span id="cb2-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string text = <span class="st">"1234"</span>;</span>
<span id="cb2-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> res = <span class="bu">std::</span>regex_match(text, m, re); <span class="co">//zwr贸ci warto true</span></span>
<span id="cb2-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-5" aria-hidden="true" tabindex="-1"></a>text = <span class="st">"1234m"</span>;</span>
<span id="cb2-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb2-6" aria-hidden="true" tabindex="-1"></a>res = <span class="bu">std::</span>regex_match(text, m, re); <span class="co">//zwr贸ci warto false</span></span></code></pre>
    </div>
    <h3 id="stdregex_search">std::regex_search</h3>
    <p>Funkcja su偶y do zweryfikowania czy pewien podcig jest zgodny ze wzorcem. Uruchom i przeanalizuj poni偶szy kod:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>regex re(<span class="st">R"(\d+)"</span>);</span>
<span id="cb3-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>smatch m;</span>
<span id="cb3-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string text = <span class="st">"1234"</span>;</span>
<span id="cb3-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> res = <span class="bu">std::</span>regex_search(text, m, re); <span class="co">//zwr贸ci warto true</span></span>
<span id="cb3-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-5" aria-hidden="true" tabindex="-1"></a>text = <span class="st">"1234m 78910"</span>;</span>
<span id="cb3-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb3-6" aria-hidden="true" tabindex="-1"></a>res = <span class="bu">std::</span>regex_search(text, m, re); <span class="co">//zwr贸ci warto true i zwr贸ci do m pierwszy pasujcy podcig czyli 1234</span></span></code></pre>
    </div>
    <p>Funkcja znajduje i dopasowuje tylko pierwszy pasujcy podcig. Zmienna wyniku <code>std::smatch m</code> jest
      kolekcj (podobn do wektora) element贸w typu <code>string</code>. Jeli nie znaleziono dopasowania to;</p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb4-1" aria-hidden="true" tabindex="-1"></a>m.ready() == <span class="kw">true</span></span>
<span id="cb4-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb4-2" aria-hidden="true" tabindex="-1"></a>m.empty() == <span class="kw">true</span></span>
<span id="cb4-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb4-3" aria-hidden="true" tabindex="-1"></a>m.size() == <span class="dv">0</span></span></code></pre>
    </div>
    <p>jeli znaleziono dopasowanie to: |Atrybut|Warto lub opis| |---|---| |m.ready()|true |m.empty()|false
      |m.size()|liczba istniejcych w wyra偶eniu liczba grup + 1 |m.prefix()| <code>std::string</code> zawierajcy cz
      tekstu poprzedzajc dopasowany wzorzec |m.suffix()| <code>std::string</code> zawierajcy cz tekstu nastpujc
      po dopasowanym wzorcu |m[0]| <code>std::string</code> zawierajcy tekst dopasowany wg wzorca |m[n]|
      <code>std::string</code> zawierajcy tekst dopasowanej <em>n</em>-tej grupy umieszczonej we wzorcu (gdzie
      <em>n</em> &lt;= liczbie grup) |m[n].matched()| true/false - w zale偶noci od tego czy dana grupa zostaa
      dopasowana (nie ka偶da grupa, poprawnie dopasowanego wzorca, musi zosta dopasowana np. <code>(sth)\|(sth)</code> -
      w wyra偶eniu s 2 grupy, dla dopasowania wzorca wystarczy, 偶e zostanie dopasowana tylko jedna z nich)
    </p>
    <p>呕eby znale藕 w tekcie wicej (wszystkie) pasujce do wzorca cigi funkcj <code>std::regex_search</code> mo偶na
      wywoywa cyklicznie, podajc jako tekst <code>m.sufix()</code> z ostatnio znalezionego dopasowania. Przeanalizuj
      poni偶szy przykad zawierajcy u偶ycie grup i iterowane przeszukiwanie tekstu:</p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout &lt;&lt; <span class="bu">std::</span>endl &lt;&lt; <span class="st">"regex_search all"</span> &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb5-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string log(<span class="st">R"(</span></span>
<span id="cb5-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">      Speed: 366</span></span>
<span id="cb5-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">      Mass: 35</span></span>
<span id="cb5-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">      Speed: 378</span></span>
<span id="cb5-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">      Mass: 32</span></span>
<span id="cb5-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">      Speed: 400</span></span>
<span id="cb5-8"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">      Mass: 30)"</span>);</span>
<span id="cb5-9"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>regex re(<span class="st">R"(Speed:\s(\d+))"</span>);</span>
<span id="cb5-10"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>smatch sm;</span>
<span id="cb5-11"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (regex_search(log, sm, re)) {</span>
<span id="cb5-12"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-12" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout &lt;&lt; sm[<span class="dv">0</span>] &lt;&lt; <span class="bu">std::</span>endl; <span class="co">//Podcig dla kt贸rego wzorzec jest w peni dopasowany</span></span>
<span id="cb5-13"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout &lt;&lt; <span class="st">"Group 1: "</span> &lt;&lt; sm[<span class="dv">1</span>] &lt;&lt; <span class="bu">std::</span>endl &lt;&lt; <span class="bu">std::</span>endl; <span class="co">//grupa nr 1 (\d*)</span></span>
<span id="cb5-14"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-15" aria-hidden="true" tabindex="-1"></a>      log = sm.suffix(); <span class="co">//przycicie napisu do przeszukania</span></span>
<span id="cb5-16"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb5-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <p><strong>Uwaga</strong>: iterowane przeszukiwanie mo偶na r贸wnie偶 zrealizowa przy pomocy iteratora <a
        href="https://en.cppreference.com/w/cpp/regex/regex_iterator"><code>std::regex_iterator</code></a> sprawd藕 go w
      dokumentacji.</p>
    <hr>
    <h4 id="zadanie-cd--1">Zadanie cd </h4>
    <ol start="7" type="1">
      <li>
        <p>Spr贸buj napisa program, kt贸ry wykorzystuje wyra偶enia regularne stworzone w zadaniu 4 i u偶ywajc
          <code>std::regex_match</code> przeparsuj nastpujc kolekcj numer贸w rejestracyjnych zwracajc te, kt贸re
          pochodz z poznania (PO) lub powiatu poznaskiego (PZ):
        </p>
        <div class="sourceCode" id="cb6">
          <pre
            class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="bu">std::</span>string&gt; lines = {<span class="st">"PO12345"</span>, <span class="st">"PO 12345"</span>, <span class="st">"PZ973ND"</span>, <span class="st">"WE20456"</span>};</span></code></pre>
        </div>
      </li>
    </ol>
    <hr>
    <h2 id="pliki">Pliki</h2>
    <p>W Lab02 zapoznae si z wczytywaniem plik贸w z danymi w formie tabelarycznej. W aktualnym wiczeniu przedstawiono
      dodatkowe informacje przydatne przy realizacji zada.</p>
    <p>Aby uzyska dostp do plik贸w bez podawania cie偶ki bezwzgldnej, nale偶y umieci otwierane pliki w folderze
      uruchamiania programu. W przypadku uruchamiania programu z poziomu Qt Creator domylnym folderem uruchomieniowym
      jest folder kompilacji znajdujcy si <em>obok</em> folderu projektu, o nazwie:
      <em>build-&lt;project_name&gt;-&lt;kit_name&gt;-&lt;build_type&gt;</em>, np.
      <em>build-regex-Desktop_Qt_5_13_2_MinGW_64_bit-Debug</em>.
    </p>
    <h3 id="wczytanie-pliku-wyraz-po-wyrazie">Wczytanie pliku wyraz po wyrazie</h3>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>fstream input_file(<span class="st">"filename"</span>, <span class="bu">std::</span>ios<span class="bu">::</span>in);</span>
<span id="cb7-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="bu">std::</span>string&gt; words;</span>
<span id="cb7-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (input_file.is_open()) {</span>
<span id="cb7-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">while</span> (!input_file.eof()) {</span>
<span id="cb7-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="bu">std::</span>string word;</span>
<span id="cb7-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-6" aria-hidden="true" tabindex="-1"></a>            input_file &gt;&gt; word; <span class="co">//wczytuje sowo</span></span>
<span id="cb7-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-7" aria-hidden="true" tabindex="-1"></a>            words.emplace_back(word); <span class="co">//dodaje sowo do kolekcji</span></span>
<span id="cb7-8"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-8" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb7-9"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb7-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <h3 id="wczytanie-caego-pliku-do-pamici">Wczytanie caego pliku do pamici</h3>
    <p>Poni偶szy kod wczytuje ca zawarto pliku tekstowego do zmiennej <code>std::string full_text</code>.
      Przeanalizuj kod i wykorzystaj gdy bdzie to potrzebne:</p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>fstream input_file(<span class="st">"filename"</span>, <span class="bu">std::</span>ios<span class="bu">::</span>in);</span>
<span id="cb8-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(input_file.is_open()){</span>
<span id="cb8-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-3" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>stringstream str_stream;</span>
<span id="cb8-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-4" aria-hidden="true" tabindex="-1"></a>      str_stream &lt;&lt; input_file.rdbuf(); <span class="co">//przepisuje zawarto pliku do strumienia</span></span>
<span id="cb8-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>string full_text = str_stream.str(); <span class="co">//zapisuje ca zawarto strumienia do std::string</span></span>
<span id="cb8-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb8-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <p><strong>Uwaga</strong>: kod wymaga dodatkowych plik贸w nag贸wkowych <code>&lt;fstream&gt;</code>,
      <code>&lt;sstream&gt;</code>
    </p>
    <h3 id="zapisywanie-danych-do-pliku">Zapisywanie danych do pliku</h3>
    <p>Zapis danych do pliku tekstowego jest analogiczny do wywietlania danych na konsoli, z t r贸偶nic 偶e dane
      zapisywane s do innego strumienia. Poni偶szy kod zapisuje kolejne wartoci funkcji sinus oraz warto argumentu:
    </p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>fstream output(<span class="st">"filename"</span>, <span class="bu">std::</span>ios<span class="bu">::</span>out);</span>
<span id="cb9-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (output.is_open()) {</span>
<span id="cb9-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-3" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="dt">double</span> x = <span class="dv">0</span>; x &lt; <span class="dv">10</span>; x += <span class="fl">0.1</span>) {</span>
<span id="cb9-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-4" aria-hidden="true" tabindex="-1"></a>            output &lt;&lt; x &lt;&lt; <span class="st">";"</span> &lt;&lt; sin(x) &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb9-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-5" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb9-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-6" aria-hidden="true" tabindex="-1"></a>      output.close();</span>
<span id="cb9-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb9-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <p><strong>Uwaga</strong>: Pamitaj 偶e po zakoczeniu zapisu nale偶y plik zamkn, w innym przypadku cz danych
      mo偶e si nie zapisa.</p>
    <hr>
    <h4 id="zadanie-cd--2">Zadanie cd </h4>
    <ol start="8" type="1">
      <li>Wczytaj <a href="http://jug.put.poznan.pl/lab-psio/_resources/04/numeryTelefonowGoogle.html">plik</a> z
        wynikami wyszukiwania numer贸w telefon贸w z Google i u偶ywajc <code>std::regex_search</code> lub
        <code>std::regex_iterator</code> wywietl wszystkie numery pasujce do stworzonego wczeniej wzorca.
      </li>
    </ol>
    <hr>
    <h2 id="stdpairstdtuple">std::pair/std::tuple</h2>
    <p>W przypadku operacji na plikach czsto przechowuje si pary informacji np. nazwisko i ocen studenta, symbol i
      kurs waluty. Te informacje mog by reprezentowane jako struktura, ale dla prostych element贸w (par element贸w) nie
      zawsze ma sens definiowanie nowego typu strukturalnego (z nazwanymi polami). Mo偶liwe jest wtedy wykorzystanie
      kontenera STL typu <code>std::pair</code>, kt贸ry jest wzorcem struktury o dw贸ch polach: <code>first</code> i
      <code>second</code>.
    </p>
    <p>Np. definicja pary przechowujcej kurs waluty mo偶e mie posta:</p>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">//para z wartociami domylnymi "" i 0:</span></span>
<span id="cb10-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>pair&lt;<span class="bu">std::</span>string, <span class="dt">double</span>&gt; exchange_rate_empty;</span>
<span id="cb10-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">//zmiana wartoci pary:</span></span>
<span id="cb10-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-5" aria-hidden="true" tabindex="-1"></a>exchange_rate_empty = {<span class="st">"EUR"</span>, <span class="fl">4.5</span>}; <span class="co">// lub std::make_pair&lt;string,double&gt;("EUR",4.5);</span></span>
<span id="cb10-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">//definicja para z zainicjowan dwoma wartociami:</span></span>
<span id="cb10-8"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>pair&lt;<span class="bu">std::</span>string, <span class="dt">double</span>&gt; exchange_rate_usd(<span class="st">"usd"</span>,<span class="fl">4.10</span>);</span></code></pre>
    </div>
    <p>Odwoanie si do p贸l pary mo偶e mie posta:</p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">//odwoanie si do p贸l first i second</span></span>
<span id="cb11-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout &lt;&lt; <span class="st">"currency: "</span> &lt;&lt; exchange_rate_usd.first &lt;&lt; <span class="st">" - rate: "</span> &lt;&lt; exchange_rate_usd.second;</span>
<span id="cb11-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">//lub z u偶yciem structured binding od C++17</span></span>
<span id="cb11-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span>[currency, rate] = exchange_rate_usd;</span>
<span id="cb11-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout &lt;&lt; <span class="st">"currency: "</span> &lt;&lt; currency &lt;&lt; <span class="st">" - rate: "</span> &lt;&lt; rate;</span></code></pre>
    </div>
    <p>U偶ycie <code>auto[currency, rate] = exchange_rate_usd;</code> w domylnie skonfigurowanym rodowisku spowoduje
      pojawienie si <em>Warning</em> w czasie kompilacji. Aby korzysta z standardu C++17 nale偶y wyedytowa plik
      <code>.pro</code> projektu i zamieni:
    </p>
    <pre class="qmake"><code>CONFIG += console c++11</code></pre>
    <p>na:</p>
    <pre class="qmake"><code>CONFIG += console c++17</code></pre>
    <p>Nastpnie klikamy prawym klawiszem na nazw projektu i wybieramy <em><strong>Run qmake</strong></em>.</p>
    <p>Krotka (<code>std::tuple</code>), jest wzorcem podobnym do pary, ale mo偶e si skada si z wikszej ni偶 2 liczby
      p贸l. Krotka/para mo偶e by wykorzystana np. do zwracania przez funkcj wicej ni偶 jednej wartoci:</p>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>tuple&lt;<span class="dt">char</span>, <span class="dt">int</span>, <span class="dt">bool</span>&gt; mytuple() {</span>
<span id="cb14-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a = <span class="ch">'a'</span>;</span>
<span id="cb14-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i = <span class="dv">123</span>;</span>
<span id="cb14-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> b = <span class="kw">true</span>;</span>
<span id="cb14-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {a, i, b};<span class="co">// lub std::make_tuple(a, i, b);</span></span>
<span id="cb14-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb14-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <p>Wywoanie funkcji z wykorzystaniem structured binding mo偶e mie posta:</p>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> [a, i, b] = mytuple();</span></code></pre>
    </div>
    <hr>
    <h2 id="stdmap">std::map</h2>
    <p>Mapa jest tablic asocjacyjn przechowujc dane jako par klucza i wartoci zorganizowan w formie drzewa
      binarnego (BST) (ang. binary search tree)). Oznacza to, 偶e kontener jest posortowanym (wg klucza) zbiorem danych,
      w kt贸rym mo偶e istnie wycznie jedna warto przypisana do danego klucza.</p>
    <p>Elementem kontenera jest para taka 偶e: <code>std::pair&lt;typ_klucza,typ_wartoci&gt;</code> a definicja
      kontenera ma posta:</p>
    <h3 id="definiowanie-mapy">Definiowanie mapy</h3>
    <div class="sourceCode" id="cb16">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>map&lt;<span class="dt">key_type</span>,<span class="dt">value_type</span>&gt; container_name;</span></code></pre>
    </div>
    <p>np.</p>
    <div class="sourceCode" id="cb17">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>map&lt;<span class="bu">std::</span>string, <span class="dt">int</span>&gt; word_statistics;</span></code></pre>
    </div>
    <h3 id="dodawanie-elementu-do-mapyodwoywanie-si-do-elementu">Dodawanie elementu do mapy/Odwoywanie si do
      elementu</h3>
    <p>Element dodawany do mapy musi by umieszczony w cile okrelonym miejscu wynikajcym z organizacji BST. Std
      kontener ten nie posiada metody <code>emplace_back</code>, tylko metod <code>emplace</code> i metod
      <code>try_emplace</code>.
    </p>
    <div class="sourceCode" id="cb18">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb18-1" aria-hidden="true" tabindex="-1"></a>word_statistics.emplace(<span class="st">"the"</span>,<span class="dv">1</span>); <span class="co">//dodaje sowo "the" i przyporzdkowan mu warto: 1 odpowiada to dodaniu pary: make_pair&lt;std:string, int&gt;("the",1)</span></span></code></pre>
    </div>
    <p>Element mo偶e r贸wnie偶 zosta dodany do mapy przez odwoanie si do klucza z wykorzystaniem operatora indeksowania:
    </p>
    <div class="sourceCode" id="cb19">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb19-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb19-1" aria-hidden="true" tabindex="-1"></a>word_statistics[<span class="st">"the"</span>] = <span class="dv">1</span>; <span class="co">//dodaje sowo "the" i przyporzdkowan mu warto: 1// jeli element istnieje warto zostanie nadpisana</span></span></code></pre>
    </div>
    <p>Ten sam spos贸b mo偶e by u偶yty do odczytu wartoci przypisanej do danego klucza:</p>
    <div class="sourceCode" id="cb20">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout &lt;&lt; word_statistics[<span class="st">"the"</span>]; <span class="co">//zostanie warto 1</span></span>
<span id="cb20-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>cout &lt;&lt; word_statistics[<span class="st">"computer"</span>]; <span class="co">//element nie istnieje, zostanie utworzony i przypisana zostanie warto domylna dla int -&gt;0</span></span></code></pre>
    </div>
    <p>Odwoanie si do elementu tablicy asocjacyjnej po kluczu pozwala na odczyt wartoci, jednak w przypadku gdy taki
      klucz nie istnieje, do mapy zostanie dodany nowy element i zainicjowany wartoci domyln, a nastpnie warto ta
      zostanie zwr贸cona. Czasem jest to niepo偶dane std 偶eby temu zapobiec, nale偶aoby sprawdzi czy element istnieje
      u偶ywajc np. metody <a href="https://en.cppreference.com/w/cpp/container/map/find"><code>find</code></a> lub <a
        href="https://en.cppreference.com/w/cpp/container/map/contains"><code>contains</code></a> (C++20). Mo偶na r贸wnie偶
      u偶y metody <code>at</code>, kt贸ra w przypadku nie znalezienia elementu generuje wyjtek
      <code>std::out_of_range</code>.
    </p>
    <div class="sourceCode" id="cb21">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb21-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string word2find = <span class="st">"elephant"</span>;</span>
<span id="cb21-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>{</span>
<span id="cb21-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-3" aria-hidden="true" tabindex="-1"></a>      <span class="dt">int</span> val = word_statistics.at(word2find);</span>
<span id="cb21-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="cf">catch</span>(<span class="bu">std::</span>out_of_range e){</span>
<span id="cb21-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-6" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout &lt;&lt; <span class="st">"Exception: "</span> &lt;&lt; e.what() &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb21-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb21-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <p>jeli nie chcesz u偶ywa wyjtk贸w do odnalezienia elementu w mapie mo偶esz wykorzysta <code>std::map::find</code>:
    </p>
    <div class="sourceCode" id="cb22">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>string word2find = <span class="st">"elephant"</span>;</span>
<span id="cb22-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> search = word_statistics.find(word2find); <span class="co">//zwraca iterator</span></span>
<span id="cb22-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(search != word_statistics.end()) {</span>
<span id="cb22-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">int</span> val = search-&gt;second; <span class="co">//znaleziona warto </span></span>
<span id="cb22-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> {</span>
<span id="cb22-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-7" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout &lt;&lt; <span class="st">"Element nie zosta znaleziony"</span> &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb22-8"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb22-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <h3 id="iterowanie-po-mapie">Iterowanie po mapie</h3>
    <p>Mapa jest kontenerem STL, std iterowanie po kontenerze odbywa si, tak jak w przypadku wektor贸w i list, przy
      pomocy iterator贸w lub range-based for loop. Pierwszy element w kontenerze (<code>*word_statistics.begin()</code>)
      jest najmniejszy (w porzdku klucza) a ostatni element jest najwikszy. Nale偶y pamita, 偶e elementem kontenera
      jest para.</p>
    <div class="sourceCode" id="cb23">
      <pre
        class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb23-1"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">auto</span> it = word_statistics.begin(); it != word_statistics.end(); it++){ <span class="co">//gdzie it jest iteratorem typu: std::map&lt;std::string,int&gt;::iterator</span></span>
<span id="cb23-2"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-2" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout&lt;&lt; it-&gt;first &lt;&lt; <span class="st">" - "</span> &lt;&lt; it-&gt;second&lt;&lt; <span class="bu">std::</span>endl; <span class="co">// wywietla klucz i warto poszczeg贸lnych element贸w listy</span></span>
<span id="cb23-3"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-4"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">//lub z wykorzystaniem structure binding i for range loop</span></span>
<span id="cb23-6"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">auto</span> [word, frequency] : word_statistics){ <span class="co">// rzutowanie klucza i wartoci elementu na zmienn word (klucz) i frequency (warto)</span></span>
<span id="cb23-7"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-7" aria-hidden="true" tabindex="-1"></a>      <span class="bu">std::</span>cout&lt;&lt; word &lt;&lt; <span class="st">" - "</span> &lt;&lt; frequency &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb23-8"><a href="http://jug.put.poznan.pl/lab-psio/Lab%2004%20-%20Pliki,%20wyra%bfenia%20regularne.html#cb23-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
    </div>
    <h2 id="zadanie-kocowe-">Zadanie kocowe </h2>
    <ol type="1">
      <li>Wczytaj <a href="http://jug.put.poznan.pl/lab-psio/_resources/04/license.txt">plik</a> zawierajcy licencj
        GNU, w <code>std::map</code> umie wyrazy wraz z czstoci ich wystpowania:
        <ul>
          <li>Wczytuj wyraz po wyrazie i dodawaj element do mapy inkrementujc warto o 1 (bdzie ona stanowia licznik
            liczby wystpie danego wyrazu).</li>
          <li>Po zakoczeniu wczytywania wywietl statystyk wyraz贸w z liczb ich wystpie.</li>
          <li>U偶ywajc algorytmu <code>std::copy</code> przekopiuj dane z mapy do
            <code>std::vector&lt;std::pair&lt;std::string,int&gt;&gt;</code> i posortuj sowa po czstoci wystpie.
            <strong>PODPOWIED殴</strong>: Przed skorzystaniem z <code>std::copy</code> zobacz jak wyglda przykad
            (<em>Example</em>) na stronie referencyjnej <a
              href="https://en.cppreference.com/w/cpp/algorithm/copy"></a><a
              href="https://en.cppreference.com/w/cpp/algorithm/copy">https://en.cppreference.com/w/cpp/algorithm/copy</a>.
          </li>
          <li>Zapisz wynik do pliku.</li>
          <li>Zmodyfikuj program tak, aby u偶ywajc wyra偶e regularnych wybra z wczytywanego tekstu tylko sowa,
            usuwajc znaki, kt贸re nie s literami (np. znaki interpunkcyjne).</li>
          <li>U偶ywajc algorytmu <code>std::transform</code> i predykatu <code>std::tolower</code> przed dodaniem sowa
            do mapy zmie wielko liter tak by w mapie umieszczone byy unikalne sowa pisane maymi literami.</li>
        </ul>
      </li>
    </ol>
    <hr>
    <h2 id="zadanie-domowe-">Zadanie domowe </h2>
    <h4 id="zadanie-1">Zadanie 1</h4>
    <p>Wczytaj pliki zawierajce wyniki wyszukiwania stron internetowych, m.in. plik dla kt贸rego poprzednio
      wyodrbniae telefony (lista plik贸w zawierajca wyniki wyszukiwa w Google: <a
        href="http://jug.put.poznan.pl/lab-psio/_resources/04/numeryTelefonowGoogle.html">plik1</a>, <a
        href="http://jug.put.poznan.pl/lab-psio/_resources/04/wypozyczalnie_tel_biblioteki_google.html">plik2</a> , <a
        href="http://jug.put.poznan.pl/lab-psio/_resources/04/wypozyczalnie_tel_biblioteki_google2.html">plik3</a>, <a
        href="http://jug.put.poznan.pl/lab-psio/_resources/04/wypozyczalnie_tel_biblioteki_google3.html">plik4</a>.
      Zauwa偶, 偶e telefon wizualnie skojarzony jest z hyperlinkiem (umieszczonym w nag贸wku wyniku wyszukiwania)
      prowadzcym na stron, na kt贸rej zosta opublikowany. np.
      <code>https://www.biblioteka.wroc.pl/filie/filia-nr-7</code>. atwiej to zauwa偶y gdy np. w Google Chrome, na
      podgldzie strony, wybierzesz funkcj inspect <a
        href="http://jug.put.poznan.pl/lab-psio/_resources/04/google_inspect.png">preview</a>, wtedy mo偶esz zobaczy
      zagnie偶d偶on struktur dokumentu html.
    </p>
    <ul>
      <li>Stw贸rz wyra偶enie regularne, kt贸re wyodrbnia wyniki poszczeg贸lnych znalezionych w wyszukiwarce pozycji i
        wyodrbni z niego hyperlink z adresem znalezionej strony</li>
      <li>Zastosuj wyra偶enie regularne z zadania wprowadzajcego nr 5 i 6, kt贸re w obrbie znalezionej pozycji
        wyszukiwania wyodrbni wszystkie cigi pasujce do wzorca numeru telefonu. <strong>Wersja trudniejsza</strong>:
        zmodyfikuj tak wyra偶enie regularne 偶eby znale藕 jak najwicej numer贸w telefon贸w pojawiajcych si w wynikach
        wyszukiwania.</li>
      <li>znalezione dane zapisuj do mapy <code>std::map&lt;std::string, std::vector&lt;std::string&gt;&gt;</code>,
        kt贸rej kluczem jest hypercze, a wartociami wektor zawierajcy numery telefon贸w skojarzone z danym czem.
        Otw贸rz 1-2 stron w przegldarce i zweryfikuj skuteczno z jak udao Ci si wyodrbni numery telefon贸w i
        hyperliniki odnoszce si do wynik贸w wyszukiwania. W wersji podstawowej mo偶esz zao偶y, 偶 jeli znajdziesz
        wikszo (&gt;50%) numer贸w pasujcych do zao偶onego wzorca, to wymagania zadania zostay spenione.</li>
      <li>dokonaj transformacji numer贸w telefon贸w do znormalizowanej postaci usuwajc z nich spacje i mylniki oraz
        nawiasy</li>
      <li>stw贸rz funkcj <code>std::string href_trimmed = href_trim(href_full)</code>, kt贸ra z hyperlinku wyodrbni
        wycznie nazw domeny np. dla <code>https://www.biblioteka.wroc.pl/filie/filia-nr-7</code> bdzie to
        <code>biblioteka.wroc.pl</code>. U偶yj tej wartoci jako klucza mapy (wtedy telefony r贸偶nych filii zostan
        pogrupowane w obrbie jednego klucza)
      </li>
      <li>u偶ywajc algorytmu <code>std::unique_copy</code> lub kontenera <code>std::set</code> spraw, 偶eby dla danego
        wpisu numery telefon贸w si nie powtarzay (mo偶e si zdarzy, 偶e dany numer pojawia si na kilku stronach
        nale偶cych do tej samej domeny)</li>
      <li>zapisz dane do pliku CSV, w kt贸rym w pierwszej kolumnie znajduje si nazwa domeny, a w kolejnych znalezione
        numery telefon贸w (mo偶e si zdarzy, 偶e w ka偶dym wierszu bdzie inna liczba kolumn)</li>
    </ul>
    <hr>
    <p>Autorzy: <em>Piotr Kaczmarek</em></p>
  </main>


</body>

</html>